"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1342],{2435:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(14232),a=n(81855),i=n(91372),s=n(16361);let o=e=>{let{title:t}=(0,a.N)(),[n]=(0,r.useMemo)(()=>e.split(s.QB),[e]),{title:o}=i.A[n]||{};return{appendFileToTitle:(0,r.useCallback)((n,r)=>{let a=n?` - ${n}${r?` ${s.g6}`:""}`:"";t(e,`${o}${a}`)},[e,o,t]),prependFileToTitle:(0,r.useCallback)((n,r,a)=>{let i=n?`${r?`${s.g6} `:""}${n}${a?" ":" - "}`:"";t(e,`${i}${o}`)},[e,o,t])}}},35144:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(37876),a=n(14232),i=n(77232),s=n(66501),o=n(78011),l=n(81855);let c=i.Ay.div.withConfig({componentId:"sc-e37924df-0"})([""]),d=(0,a.memo)(({id:e,useHook:t,StyledComponent:n,children:i})=>{let{processes:{[e]:{url:d=""}={}}}=(0,l.N)(),u=(0,a.useRef)(null),[f,m]=(0,a.useState)(!0),p=(0,a.useMemo)(()=>({contain:"strict",visibility:f?"hidden":"visible"}),[f]);return t({containerRef:u,id:e,loading:f,setLoading:m,url:d}),(0,r.jsxs)(r.Fragment,{children:[f&&(0,r.jsx)(s.A,{}),(0,r.jsx)(n||c,{ref:u,style:p,...(0,o.A)({id:e}),children:i})]})})},66501:(e,t,n)=>{n.d(t,{A:()=>r});let r=n(77232).Ay.div.withConfig({componentId:"sc-83f4cbe3-0"})(['cursor:wait;height:100%;width:100%;&::before{color:#fff;content:"Working on it...";display:flex;font-size:12px;font-weight:200;justify-content:center;letter-spacing:0.3px;mix-blend-mode:difference;padding-top:',"px;}"],({$hasColumns:e,theme:t})=>e?t.sizes.window.textTopPadding+t.sizes.fileManager.columnHeight:t.sizes.window.textTopPadding)},71342:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var r=n(37876),a=n(14232),i=n(79052),s=n(81855),o=n(60109),l=n(65231),c=n(2435),d=n(84906);let u=({containerRef:e,id:t,setLoading:n,url:r})=>{let{processes:{[t]:{closing:u,libs:f=[]}={}}={}}=(0,s.N)(),{readFile:m}=(0,l.f)(),p=(0,a.useRef)(void 0),{appendFileToTitle:y}=(0,c.A)(t),g=(0,d.A)(t,e,void 0,"canvas { image-rendering: pixelated; }",!0),h=(0,a.useCallback)(async e=>{(async e=>{let t=g?.();if(!t)return;p.current=r,n(!0);let a=t.document.querySelector("#canvas");a.addEventListener("contextmenu",o.CH),t.Module={arguments:e?[e]:void 0,canvas:a,postRun:()=>n(!1)},await (0,o.aY)(f,void 0,void 0,void 0,t),e&&y((0,i.basename)(r))})(e?`${(0,o.Zd)(await m(e))}?e=.tic`:"")},[y,g,f,m,n,r]);(0,a.useEffect)(()=>{r===p.current||u||h(r)},[u,h,r])};var f=n(35144);let m=(0,a.memo)(({id:e})=>(0,r.jsx)(f.A,{id:e,useHook:u}))},78011:(e,t,n)=>{n.d(t,{A:()=>p});var r=n(79052),a=n(14232),i=n(49697),s=n(84966),o=n(54188),l=n(65231),c=n(81855),d=n(55295),u=n(16361),f=n(60109),m=n(29804);let p=({callback:e,directory:t=u.Bn,id:n,onDragLeave:p,onDragOver:y,updatePositions:g})=>{let{url:h}=(0,c.N)(),v=(0,m.w)(),{iconPositions:b,sortOrders:w,setIconPositions:A}=(0,d.w)(),{exists:E,mkdirRecursive:C,updateFolder:x,writeFile:$}=(0,l.f)(),k=(0,a.useCallback)(async(e,t,a)=>{if(n)if(t){let i=(0,r.join)(u.Bn,e);if(await C(u.Bn),await $(i,t,!0))return a===o.z.UPDATE_URL&&h(n,i),x(u.Bn,e),(0,r.basename)(i)}else a===o.z.UPDATE_URL&&h(n,e);return""},[n,C,x,h,$]),{openTransferDialog:L}=(0,i.A)();return{onDragLeave:p,onDragOver:(0,a.useCallback)(e=>{y?.(e),(0,f.CH)(e)},[y]),onDrop:(0,a.useCallback)(a=>{if(u.jj.has((0,f.uQ)(t)))return;if(a.target instanceof HTMLElement){if(a.target.closest(".focus-within")?.contains(a.target))return;if(g){let{files:e,text:n}=(0,s.bn)(a);if(0===e.length&&""===n)return;(async()=>{let i={x:a.clientX,y:a.clientY},s=[];if(n){try{s=JSON.parse(n)}catch{}if(!Array.isArray(s))return;let[e]=s;if(!e||e.startsWith(t)&&(0,r.basename)(e)===(0,r.relative)(t,e))return;s=s.map(e=>(0,r.basename)(e))}else s=e instanceof FileList?[...e].map(e=>e.name):[...e].map(e=>e.getAsFile()?.name||"").filter(Boolean);s=await (0,f.$I)(s,t,b,E),(0,f.$Y)(t,a.target,b,w,i,s,A,E)})()}}let i="string"==typeof n;i&&!g&&t===u.Bn&&v.current[n]?.componentWindow?.focus(u.VD),(0,s.nX)(a,e||k,t,L,i)},[e,t,E,b,n,L,v,A,w,g,k])}}},84906:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(14232),a=n(78011),i=n(16361),s=n(81855),o=n(55295);let l=(e,t,n,l,c=!1)=>{let[d,u]=(0,r.useState)(),[f,m]=(0,r.useState)(),{onDragOver:p,onDrop:y}=(0,a.A)({id:e}),{processes:{[e]:{maximized:g}={}}={}}=(0,s.N)(),{foregroundId:h,setForegroundId:v}=(0,o.w)(),b=(0,r.useCallback)(()=>{let t;if(!d)return;d.querySelector("iframe")?.remove();let n=((e,t,n)=>{let r=document.createElement("iframe");r.title=e,r.style.backgroundColor="transparent",r.style.border="0",r.style.width="100%",r.style.height="100%",t.append(r);let a=r.contentDocument;a.open(),a.write(`
    <!DOCTYPE html>
    ${n?`<head><style>${n}</style></head>`:"<head />"}
    <body />
    `),a.close();let i=r.contentWindow;return i.document.documentElement.style.height="100%",i.document.documentElement.style.width="100%",i.document.body.style.height="100%",i.document.body.style.width="100%",i.document.body.style.margin="0",i.document.body.style.overflow="hidden",r})(e,d,l),r=n.contentWindow;(e=>{let t=e.HTMLCanvasElement.prototype.getContext;e.HTMLCanvasElement.prototype.getContext=function(e,n){return("webgl"===e||"webgl2"===e)&&(n=Object.assign(n||{},{preserveDrawingBuffer:!0})),t.call(this,e,n)}})(r),c&&(t=(e=>{let t=e.createElement("canvas");return t.id="canvas",t.style.width="100%",t.style.height="100%",t.tabIndex=-1,e.body.append(t),t})(n.contentDocument));let a=()=>{c&&t?t.focus(i.VD):r.focus(),v(e)};return r.addEventListener("click",a),r.addEventListener("focus",a),r.addEventListener("blur",()=>v("")),r.addEventListener("dragover",p),r.addEventListener("drop",y),m(r),r},[d,e,p,y,v,l,c]);return(0,r.useLayoutEffect)(()=>{f&&h===e&&requestAnimationFrame(()=>{n?n(f):c?f.document.querySelector("canvas")?.focus(i.VD):f.focus()})},[f,n,h,e,g,c]),(0,r.useEffect)(()=>{if(!d){let e=()=>{requestAnimationFrame(()=>{t.current?u(t.current):e()})};e()}},[d,t]),(0,r.useMemo)(()=>d?b:void 0,[d,b])}}}]);