(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3332],{16760:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(19473)}])},19473:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>en});var n=r(37876),i=r(14232),o=r(37989),s=r(18847),a=r.n(s),l=r(81855);let c=a()(()=>r.e(6850,"high").then(r.bind(r,46850)),{loadableGenerated:{webpack:()=>[46850]}}),d=(0,i.memo)(()=>{let{processes:e={}}=(0,l.N)();return(0,n.jsx)(o.N,{initial:!1,presenceAffectsLayout:!1,children:Object.entries(e).map(([e,{closing:t,Component:r,hasWindow:i}])=>e&&r&&!t&&(0,n.jsx)(c,{Component:r,hasWindow:i,id:e},e))})});var u=r(77232);let h=u.Ay.main.withConfig({componentId:"sc-ab1d5439-0"})(["background-color:transparent;contain:strict;height:100%;inset:0;overflow:clip;overscroll-behavior:none;position:fixed;width:100vw;#loading-status{background-color:#fff;border:1px solid #000;border-radius:8px;box-shadow:0 0 50px 1px #000;display:none;font-weight:600;left:50%;padding:12px 15px;pointer-events:none;position:absolute;top:50%;transform:translate(-50%,-50%);user-select:none;}> canvas{background-color:inherit;height:100%;left:0;object-fit:cover;position:absolute;top:0;width:100%;z-index:-1;}"]);var f=r(79052),p=r(20067),m=r(65231),w=r(55295),g=r(96856),b=r(16361),v=r(60109);let x=[];var y=r(40514);let k=(0,i.memo)(({children:e})=>{let t=(0,i.useRef)(null);return(e=>{let{exists:t,lstat:n,readFile:o,readdir:s,updateFolder:a,writeFile:l}=(0,m.f)(),{sessionLoaded:c,setWallpaper:d,wallpaperImage:h,wallpaperFit:y}=(0,w.w)(),{colors:k}=(0,u.DP)(),[E]=(0,i.useMemo)(()=>h.split(" "),[h]),S="VANTA WIREFRAME"===h,C=(0,g.A)(c?p.vJ[E]:void 0),j=(0,i.useRef)(0),$=(0,i.useRef)(!1),L=(0,i.useCallback)(t=>{e.current?.querySelector(p.sz)?.remove(),t||(e.current?.querySelector(p.j2)?.remove(),window.WallpaperDestroy?.()),"SLIDESHOW"!==E&&(document.documentElement.style.removeProperty("--after-background"),document.documentElement.style.removeProperty("--before-background"))},[e,E]),I=(0,i.useCallback)(async r=>{let n;if(!e.current||window.DEBUG_DISABLE_WALLPAPER)return;let{matches:i}=window.matchMedia("(prefers-reduced-motion: reduce)"),s=!window.top||window===window.top;if(!s)try{s=window.location.origin!==window.top?.location.origin}catch{s=!0}if("VANTA"===E)n={material:{options:{wireframe:S||!s}},waveSpeed:i?p.S7:1};else if(h.startsWith("MATRIX"))n={animationSpeed:i?p.S7:1,volumetric:h.endsWith("3D"),...s?{}:{fallSpeed:-.09,forwardSpeed:-.25}};else if("STABLE_DIFFUSION"===E){let e=`${b.zQ}/${b.sY}`;await t(e)&&(n={prompts:JSON.parse((await o(e))?.toString()||"[]")})}if(document.documentElement.style.setProperty("background",document.documentElement.style.background.replace(/".*"/,"")),L(r),!$.current&&"function"==typeof window.OffscreenCanvas&&C.current){let t={config:n,devicePixelRatio:1};if(r)C.current.postMessage(t);else{let r=(0,v.aH)(e.current);if(C.current.postMessage({canvas:r,...t},[r]),"STABLE_DIFFUSION"===E){let t=document.createElement("div");t.id="loading-status",e.current?.append(t),window.WallpaperDestroy=()=>{t.remove(),window.WallpaperDestroy=void 0},C.current.addEventListener("message",({data:e})=>{"[error]"===e.type?d(b.nQ):e.type?t.textContent=e.message||"":e.message||(j.current=window.setTimeout(()=>I(!0),b.S4*(window.STABLE_DIFFUSION_DELAY_IN_MIN_OVERRIDE??p.vS))),t.style.display=e.message?"block":"none"})}else C.current.addEventListener("message",({data:e})=>{"[error]"===e.type&&(e.message.includes("getContext")?($.current=!0,I()):d("SLIDESHOW"))})}}else if(p.cO[E]){let t=()=>d(E===b.nQ?"SLIDESHOW":b.nQ);p.cO[E]().then(({default:r})=>r?.(e.current,n,t)).catch(t)}else d(b.nQ)},[e,t,o,L,d,S,h,E,C]),A=(0,i.useCallback)(async e=>(await s(e)).reduce(async(t,r)=>{let i=(0,f.join)(e,r);return[...await t,...(await n(i)).isDirectory()?await A(i):[b.O4.has((0,v.uQ)(i))&&!b.q$.has((0,v.uQ)(i))?i:""]].filter(Boolean)},Promise.resolve([])),[s,n]),M=(0,i.useCallback)(async()=>{let[,n]=/url\((.*)\)/.exec(document.documentElement.style.getPropertyValue((0,v.r3)()?"--before-background":"--after-background"))||[];n=n?.replace(/\\/g,""),n?.startsWith("blob:")&&(0,v.E)(n);let i="",s="",c=y,u="SLIDESHOW"===E;if(u){L();let e=`${b.zQ}/${b.QM}`;await t(e)||(await l(e,JSON.stringify(await t(b.zQ)?await A(b.zQ):"[]")),a(b.zQ,b.QM)),0===x.length&&x.push(...[...new Set(JSON.parse((await o(e))?.toString()||"[]"))].sort(()=>Math.random()-.5));do{i=x.shift()||"";let[e]=x;e&&(document.querySelector(`#${p._T}`)?.remove(),(0,v.NN)(e.startsWith("/")?`${window.location.origin}${e}`:e,p._T,"auto")),i.startsWith("/")&&(i=`${window.location.origin}${i}`)}while(n===i&&x.length>1);c="fill"}else if("APOD"===E){let[,,e]=h.split(" "),[t,,r,,n]=new Intl.DateTimeFormat(b.Xn,{day:"2-digit",month:"2-digit",timeZone:"US/Eastern",year:"numeric"}).formatToParts(Date.now()).map(({value:e})=>e);if(e===`${n}-${t}-${r}`)return;L();let{date:o="",hdurl:a="",url:l=""}=await (0,v.t_)("https://api.nasa.gov/planetary/apod?api_key=DEMO_KEY");if(a||l){if(i=((0,v.e8)()>1024?a:l)||l,c="fit",(0,v.t$)(i)){let e=`https://i.ytimg.com/vi/${(0,v.IP)(i)}`;i=`${e}/maxresdefault.jpg`,s=`${e}/hqdefault.jpg`}else a&&l&&a!==l&&(s=i===l?a:l);let e=`APOD ${i} ${o}`;e!==h&&(d(e,c),setTimeout(I,b.il))}}else if(await t(h)){L();let e=await o(h),t=(0,v.uQ)(h);if(!b.T8.has(t)){let{decodeImageToBuffer:n}=await r.e(9868,"high").then(r.bind(r,97487)),i=await n(t,e);i&&(e=i)}i=(0,v.Zd)(e)}if(i)if(b.yH.has((0,v.uQ)(h))){let t=document.createElement("video");t.src=i,t.autoplay=!0,t.controls=!1,t.disablePictureInPicture=!0,t.disableRemotePlayback=!0,t.loop=!0,t.muted=!0,t.playsInline=!0,t.style.position="absolute",t.style.inset="0",t.style.width="100%",t.style.height="100%",t.style.objectFit="cover",t.style.objectPosition="center center",t.style.zIndex="-1",e.current?.append(t)}else{let e=e=>{let t=p.gF[c];if(u)try{let{searchParams:r}=new URL(e),{x:n,y:i}=Object.fromEntries(r.entries());t=`${(0,v.Si)(n)} ${(0,v.Si)(i)} / cover`}catch{}let r="tile"===c?"repeat":"no-repeat",n=window===window.top,i=(0,v.r3)();document.documentElement.style.setProperty("--background-transition-timing",u?"1.25s":"0s"),document.documentElement.style.setProperty(`--${i?"after":"before"}-background`,`url(${CSS.escape(e)}) ${t} ${r} fixed border-box border-box ${n?k.background:k.text}`),document.documentElement.style.setProperty("--after-background-opacity",i?"1":"0"),document.documentElement.style.setProperty("--before-background-opacity",i?"0":"1"),n||document.documentElement.style.setProperty("--background-blend-mode","difference")};if(s){let t=new Image;t.addEventListener("load",()=>e(i)),t.addEventListener("error",()=>e(s)),t.decoding="async",t.src=i}else e(i),u&&(j.current=window.setTimeout(M,b.cm))}else I()},[k,e,t,A,I,o,L,d,a,y,h,E,l]);(0,i.useEffect)(()=>{c&&(j.current&&(window.clearTimeout(j.current),j.current=0),E&&!p.TY.includes(E)?M().catch(I):I())},[M,I,c,E]),(0,i.useEffect)(()=>{let t=()=>{if(!e.current||!p.cO[E])return;let t=e.current.getBoundingClientRect();C.current?.postMessage(t);let r=e.current.querySelector(p.j2);r instanceof HTMLCanvasElement&&(r.style.width=`${t.width}px`,r.style.height=`${t.height}px`)};return window.addEventListener("resize",t,{passive:!0}),()=>window.removeEventListener("resize",t)},[e,E,C])})(t),(0,n.jsxs)(h,{ref:t,children:[(0,n.jsx)(y.A,{url:b.Bn,allowMovingDraggableEntries:!0,hideLoading:!0,hideScrolling:!0,isDesktop:!0,loadIconsImmediately:!0}),e]})});var E=r(4213),S=r(54239);new Intl.DateTimeFormat("en",{day:"numeric",month:"long",year:"numeric"}),new Intl.DateTimeFormat("en",{hour:"numeric",hour12:!0,minute:"2-digit",second:"2-digit"}),new Intl.DateTimeFormat("en",{weekday:"long"});let C=u.Ay.div.withConfig({componentId:"sc-b8fc51f3-0"})(["color:",";display:flex;font-size:",";height:100%;line-height:","px;max-width:",";min-width:",";padding:",";place-content:center;position:absolute;right:",";white-space:nowrap;&:hover{background-color:",";}&:active{background-color:",";}"],({theme:e})=>e.colors.text,({theme:e})=>e.sizes.clock.fontSize,b.D5-1,({theme:e,$width:t})=>`calc(${t}px + ${2*e.sizes.clock.padding}px)`,({theme:e,$width:t})=>`calc(${t}px + ${2*e.sizes.clock.padding}px)`,({theme:e})=>`0 ${e.sizes.clock.padding}px`,({theme:e,$hasAI:t})=>t?e.sizes.taskbar.ai.buttonWidth:0,({theme:e})=>e.colors.taskbar.hover,({theme:e})=>e.colors.taskbar.foreground);var j=r(64148),$=r(39654);let L=7,I=()=>{L=7},A=async({target:e})=>{if(7===L&&e instanceof HTMLElement&&(e.removeEventListener("mouseleave",I),e.addEventListener("mouseleave",I,b.w3)),0==(L-=1)){let{spawnSheep:e}=await r.e(7970,"high").then(r.bind(r,57970));e(),L=7}},M=(0,i.memo)(({hasAI:e,setClockWidth:t,toggleCalendar:o,width:s})=>{let[a,l]=(0,i.useState)(Object.create(null)),{date:c,time:d}=a,{clockSource:h}=(0,w.w)(),f=(0,i.useCallback)(()=>new Worker(r.tu(new URL(r.p+r.u(2167),r.b)),{name:"Clock"}),[h]),p=(0,i.useRef)(void 0),m=(0,i.useMemo)(()=>"OffscreenCanvas"in window,[]),x=(0,i.useCallback)(({data:e,target:t})=>{"source"===e?t.postMessage(h):l(t=>p.current&&t.date===e.date?t:e)},[h]),y=(e=>{let{contextMenu:t}=(0,j.b)(),{clockSource:r,setClockSource:n}=(0,w.w)();return(0,i.useMemo)(()=>t?.(()=>{e(!1);let t="local"===r;return[{action:()=>n("local"),label:"Local time",toggle:t},{action:()=>n("ntp"),label:"Server time",toggle:!t}]}),[r,t,n,e])})(o),k=(0,g.A)(f,x),L=(0,i.useRef)({height:b.D5,width:s}),{formats:{systemFont:I},sizes:{clock:{fontSize:M}}}=(0,u.DP)(),P=(0,i.useCallback)(()=>Math.min(Math.max(b.li,Math.ceil((0,S.kD)("44:44:44 AM",M,I))),1.5*b.li),[M,I]),T=(0,i.useCallback)(e=>{!p.current&&k.current&&e instanceof HTMLDivElement&&([...e.children].forEach(e=>e.remove()),L.current.width=P(),t(L.current.width),p.current=(0,v.aH)(e,window.devicePixelRatio,L.current),k.current.postMessage({canvas:p.current,devicePixelRatio:window.devicePixelRatio},[p.current]))},[k,a]),D=(0,i.useCallback)(e=>{A(e),o()},[o]),z=(0,$.q)(E._3);return((0,i.useEffect)(()=>{p.current=void 0},[h]),(0,i.useEffect)(()=>{if(m){let e=()=>window.matchMedia(`(resolution: ${window.devicePixelRatio}x)`).addEventListener("change",()=>{k.current?.postMessage({clockSize:L.current,devicePixelRatio:window.devicePixelRatio}),e()},b.w3);e()}else t(P())},[k,P,t,m]),d)?(0,n.jsx)(C,{ref:m?T:void 0,$hasAI:e,$width:s,"aria-label":"Clock",onClick:D,role:"timer",title:c,suppressHydrationWarning:!0,...y,...b.W8,...z,children:m?void 0:d}):null});var P=r(3861);let T=(0,u.Ay)(P.A).withConfig({componentId:"sc-e35c353f-0"})(["background-color:",";display:flex;fill:",";height:100%;left:",";place-content:center;place-items:center;position:absolute;&&{width:","px;}svg{height:",";}&:hover{background-color:",";svg{fill:",";}}&:active{background-color:hsl(0 0% 20% / 70%);svg{fill:",";}}"],({$active:e,$highlight:t,theme:r})=>e&&(t?r.colors.taskbar.foreground:"hsla(0, 0%, 25%, 50%)"),({theme:e})=>e.colors.taskbar.button.color,({$left:e})=>e?`${e}px`:0,({theme:e})=>e.sizes.taskbar.button.width,({theme:e})=>e.sizes.taskbar.button.iconSize,({$active:e,theme:t})=>e?t.colors.taskbar.foreground:t.colors.taskbar.hover,({$highlight:e,theme:t})=>e?t.colors.highlight:void 0,({$highlight:e})=>e?"hsla(207, 100%, 60%, 80%)":void 0),D=(0,u.Ay)(T).withConfig({componentId:"sc-8c9a0869-0"})(["svg{border:1px solid transparent;border-right:0;border-top:0;height:17px;margin-left:-1px;path{stroke:#fff;stroke-width:1;}}"]);var z=r(52921);let R=(0,i.memo)(()=>(0,n.jsx)("svg",{viewBox:"3 -1 30 30",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M21 0q1.516 0 2.922.391T26.547 1.5t2.227 1.727 1.727 2.227 1.109 2.625.391 2.922-.391 2.922-1.109 2.625-1.727 2.227-2.227 1.727-2.625 1.109-2.922.391q-1.953 0-3.742-.656t-3.289-1.891L1.703 31.705q-.297.297-.703.297t-.703-.297T0 31.002t.297-.703l12.25-12.266q-1.234-1.5-1.891-3.289T10 11.002q0-1.516.391-2.922T11.5 5.455t1.727-2.227 2.227-1.727T18.079.392t2.922-.391zm0 20q1.859 0 3.5-.711t2.859-1.93 1.93-2.859T30 11t-.711-3.5-1.93-2.859-2.859-1.93T21 2t-3.5.711-2.859 1.93-1.93 2.859T12 11t.711 3.5 1.93 2.859 2.859 1.93T21 20z"})})),W=(0,i.memo)(({searchVisible:e,toggleSearch:t})=>{let{sizes:{taskbar:r}}=(0,u.DP)(),o=(0,i.useCallback)(()=>t(),[t]);return(0,n.jsx)(D,{$active:e,$left:r.button.width,onClick:o,...b.WW,...(0,v.Pf)(E.BN),...(0,z.A)(),...(0,$.q)(E.Gm),children:(0,n.jsx)(R,{})})}),O = (0, i.memo)(() =>
  (0, n.jsx)("svg", {
    xmlns: "http://www.w3.org/2000/svg",
    xmlnsXlink: "http://www.w3.org/1999/xlink",
    version: "1.1",
    width: "355.5",
    height: "355.52977",
    viewBox: "0,0,355.5,355.52977",
    style: { backgroundColor: "none" },
    children: (0, n.jsx)("g", {
      transform: "translate(-61.5,0)",
      children: (0, n.jsx)("g", {
        stroke: "none",
        strokeWidth: "0",
        strokeMiterlimit: "10",
        children: [
          (0, n.jsx)("path", {
            d: "M61.5,167.96311v-116.37694l143.17333,-20.75539v137.13234z"
          }),
          (0, n.jsx)("path", {
            d: "M224.23623,167.96311v-139.96311l192.76377,-28v167.96311z"
          }),
          (0, n.jsx)("path", {
            d: "M204.67333,187.56667v137.13233l-143.17332,-20.75539v-116.37694z"
          }),
          (0, n.jsx)("path", {
            d: "M417,187.56667v167.9631l-192.76377,-28v-139.9631z"
          })
        ]
      })
    })
  })
),N=async()=>{let e=(0,E.JN)(),{default:t}=await r.e(3021,"high").then(r.t.bind(r,93021,19))||{};t?.forEach(e=>(0,v.NN)(e)),await e},_=(0,i.memo)(({startMenuVisible:e,toggleStartMenu:t})=>{let o=(0,i.useCallback)(async({ctrlKey:e,shiftKey:n})=>{if(t(),e&&n){let{spawnSheep:e}=await r.e(7970,"high").then(r.bind(r,57970));e()}},[t]);return(0,n.jsx)(T,{$active:e,onClick:o,$highlight:!0,...b.WW,...(0,v.Pf)(E.r5),...(0,z.A)(!0),...(0,$.q)(N),children:(0,n.jsx)(O,{})})}),F=u.Ay.nav.withConfig({componentId:"sc-f2abbf1d-0"})(["background-color:",";bottom:0;contain:size layout;height:","px;left:0;position:absolute;right:0;width:100vw;z-index:",";&::after{backdrop-filter:",';content:"";display:block;height:100%;position:relative;width:100%;z-index:-',";}"],({theme:e})=>e.colors.taskbar.background,b.D5,1e5,({theme:e})=>`blur(${e.sizes.taskbar.blur})`,1e5),Q=u.Ay.ol.withConfig({componentId:"sc-d8dbb385-0"})(["column-gap:1px;display:flex;height:100%;left:","px;margin:0 3px;overflow:hidden;position:absolute;right:",";"],({theme:e})=>2*e.sizes.taskbar.button.width,({$clockWidth:e,$hasAI:t,theme:r})=>`calc(${e}px + ${2*r.sizes.clock.padding}px + ${t?r.sizes.taskbar.ai.buttonWidth:"0px"})`),q=a()(()=>r.e(4381,"high").then(r.bind(r,14381)),{loadableGenerated:{webpack:()=>[14381]}}),H=(0,i.memo)(({clockWidth:e,hasAI:t})=>{let{processes:r={}}=(0,l.N)();return(0,n.jsx)(Q,{$clockWidth:e,$hasAI:t,children:(0,n.jsx)(o.N,{initial:!1,presenceAffectsLayout:!1,children:Object.entries(r).filter(([,{closing:e,hideTaskbarEntry:t}])=>!e&&!t).map(([e,{icon:t,title:r}])=>(0,n.jsx)(q,{icon:t,id:e,title:r},e))})})});var B=r(72328);let U=a()(E.Me),G=a()(E.Ki),V=a()(E._3),J=a()(E.Gm),X=a()(E.JN),Y=(0,i.memo)(()=>{let[e,t]=(0,i.useState)(!1),[r,s]=(0,i.useState)(!1),[a,l]=(0,i.useState)(!1),[c,d]=(0,i.useState)(!1),[u,h]=(0,i.useState)(b.li),{aiEnabled:f}=(0,w.w)(),p=(0,B.i)(),m=(0,i.useCallback)(e=>t(t=>e??!t),[]),g=(0,i.useCallback)(e=>s(t=>e??!t),[]),v=(0,i.useCallback)(e=>l(t=>e??!t),[]),x=(0,i.useCallback)(e=>d(t=>e??!t),[]),y=p||f;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(o.N,{initial:!1,presenceAffectsLayout:!1,children:[e&&(0,n.jsx)(X,{toggleStartMenu:m},"startMenu"),r&&(0,n.jsx)(J,{toggleSearch:g},"search")]}),(0,n.jsxs)(F,{...(0,z.A)(),...b.W8,children:[(0,n.jsx)(_,{startMenuVisible:e,toggleStartMenu:m}),(0,n.jsx)(W,{searchVisible:r,toggleSearch:g}),(0,n.jsx)(H,{clockWidth:u,hasAI:y}),(0,n.jsx)(M,{hasAI:y,setClockWidth:h,toggleCalendar:v,width:u}),y&&(0,n.jsx)(U,{aiVisible:c,toggleAI:x})]}),(0,n.jsxs)(o.N,{initial:!1,presenceAffectsLayout:!1,children:[a&&(0,n.jsx)(V,{toggleCalendar:v},"calendar"),c&&(0,n.jsx)(G,{toggleAI:x},"aiChat")]})]})}),K=e=>{e.error?.stack?.includes("eval at <anonymous>")&&(0,v.CH)(e)};var Z=r(52179),ee=r(29804),et=r(91372);let er=e=>e.startsWith("http://")||e.startsWith("https://")||e.startsWith("chrome://"),en=(0,i.memo)(()=>((()=>{let{setForegroundId:e}=(0,w.w)(),t=(0,ee.w)();(0,i.useEffect)(()=>{let r=()=>{if(document.activeElement instanceof HTMLIFrameElement){let[r]=Object.entries(t.current).find(([,{componentWindow:e}])=>e?.contains(document.activeElement))||[];r&&(e(r),window.addEventListener("click",({target:r})=>{let[n=""]=Object.entries(t.current).find(([,{componentWindow:e}])=>r instanceof HTMLElement&&e?.contains(r))||[];e(n)},b.w3))}};return window.addEventListener("blur",r,{passive:!0}),()=>window.removeEventListener("blur",r)},[t,e])})(),(()=>{let{exists:e,fs:t,stat:r}=(0,m.f)(),{open:n}=(0,l.N)(),o=(0,i.useRef)(!1);(0,i.useEffect)(()=>{if(o.current||!t||!e||!n)return;o.current=!0;let i=(0,v.ov)("app"),s=(0,v.ov)("url"),a=async t=>{if(!t)return;let r=!1;try{r="Browser"===t&&er(s)||await e(s)}catch{}("FileExplorer"!==t||!s||r)&&n(t,r?{url:s}:void 0)};if(i)a(Object.fromEntries(Object.entries(et.A).filter(([,{dialogProcess:e}])=>!e).map(([e])=>[e.toLowerCase(),e]))[i.toLowerCase()]);else if(s)if(er(s))a("Browser");else try{r(s).then(e=>a(e.isDirectory()?"FileExplorer":(0,S.YD)((0,v.uQ)(s))))}catch{}},[e,t,n,r])})(),(0,Z.A)(),(0,i.useEffect)(()=>(window.addEventListener("error",K),()=>window.removeEventListener("error",K)),[]),(0,n.jsxs)(k,{children:[(0,n.jsx)(Y,{}),(0,n.jsx)(d,{})]})))},37989:(e,t,r)=>{"use strict";r.d(t,{N:()=>g});var n=r(37876),i=r(14232),o=r(5048),s=r(91200),a=r(50181),l=r(3866),c=r(27211),d=r(39751);class u extends i.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,r=(0,c.s)(e)&&e.offsetWidth||0,n=this.props.sizeRef.current;n.height=t.offsetHeight||0,n.width=t.offsetWidth||0,n.top=t.offsetTop,n.left=t.offsetLeft,n.right=r-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function h({children:e,isPresent:t,anchorX:r,root:o}){let s=(0,i.useId)(),a=(0,i.useRef)(null),l=(0,i.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=(0,i.useContext)(d.Q);return(0,i.useInsertionEffect)(()=>{let{width:e,height:n,top:i,left:d,right:u}=l.current;if(t||!a.current||!e||!n)return;let h="left"===r?`left: ${d}`:`right: ${u}`;a.current.dataset.motionPopId=s;let f=document.createElement("style");c&&(f.nonce=c);let p=o??document.head;return p.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${n}px !important;
            ${h}px !important;
            top: ${i}px !important;
          }
        `),()=>{p.removeChild(f),p.contains(f)&&p.removeChild(f)}},[t]),(0,n.jsx)(u,{isPresent:t,childRef:a,sizeRef:l,children:i.cloneElement(e,{ref:a})})}let f=({children:e,initial:t,isPresent:r,onExitComplete:o,custom:a,presenceAffectsLayout:c,mode:d,anchorX:u,root:f})=>{let m=(0,s.M)(p),w=(0,i.useId)(),g=!0,b=(0,i.useMemo)(()=>(g=!1,{id:w,initial:t,isPresent:r,custom:a,onExitComplete:e=>{for(let t of(m.set(e,!0),m.values()))if(!t)return;o&&o()},register:e=>(m.set(e,!1),()=>m.delete(e))}),[r,m,o]);return c&&g&&(b={...b}),(0,i.useMemo)(()=>{m.forEach((e,t)=>m.set(t,!1))},[r]),i.useEffect(()=>{r||m.size||!o||o()},[r]),"popLayout"===d&&(e=(0,n.jsx)(h,{isPresent:r,anchorX:u,root:f,children:e})),(0,n.jsx)(l.t.Provider,{value:b,children:e})};function p(){return new Map}let m=e=>e.key||"";function w(e){let t=[];return i.Children.forEach(e,e=>{(0,i.isValidElement)(e)&&t.push(e)}),t}let g=({children:e,custom:t,initial:r=!0,onExitComplete:c,presenceAffectsLayout:d=!0,mode:u="sync",propagate:h=!1,anchorX:p="left",root:g})=>{let[b,v]=function(e=!0){let t=(0,i.useContext)(l.t);if(null===t)return[!0,null];let{isPresent:r,onExitComplete:n,register:o}=t,s=(0,i.useId)();(0,i.useEffect)(()=>{if(e)return o(s)},[e]);let a=(0,i.useCallback)(()=>e&&n&&n(s),[s,n,e]);return!r&&n?[!1,a]:[!0]}(h),x=(0,i.useMemo)(()=>w(e),[e]),y=h&&!b?[]:x.map(m),k=(0,i.useRef)(!0),E=(0,i.useRef)(x),S=(0,s.M)(()=>new Map),[C,j]=(0,i.useState)(x),[$,L]=(0,i.useState)(x);(0,a.E)(()=>{k.current=!1,E.current=x;for(let e=0;e<$.length;e++){let t=m($[e]);y.includes(t)?S.delete(t):!0!==S.get(t)&&S.set(t,!1)}},[$,y.length,y.join("-")]);let I=[];if(x!==C){let e=[...x];for(let t=0;t<$.length;t++){let r=$[t],n=m(r);y.includes(n)||(e.splice(t,0,r),I.push(r))}return"wait"===u&&I.length&&(e=I),L(w(e)),j(x),null}let{forceRender:A}=(0,i.useContext)(o.L);return(0,n.jsx)(n.Fragment,{children:$.map(e=>{let i=m(e),o=(!h||!!b)&&(x===$||y.includes(i));return(0,n.jsx)(f,{isPresent:o,initial:(!k.current||!!r)&&void 0,custom:t,presenceAffectsLayout:d,mode:u,root:g,onExitComplete:o?void 0:()=>{if(!S.has(i))return;S.set(i,!0);let e=!0;S.forEach(t=>{t||(e=!1)}),e&&(A?.(),L(E.current),h&&v?.(),c&&c())},anchorX:p,children:e},i)})})}},39654:(e,t,r)=>{"use strict";r.d(t,{q:()=>i});var n=r(14232);let i=e=>{let[t,r]=(0,n.useState)(!1),i=(0,n.useRef)(!1),o=(0,n.useCallback)(()=>{i.current||(i.current=!0,e().then(()=>r(!0)))},[e]);return t?{}:{onMouseOverCapture:o}}},52921:(e,t,r)=>{"use strict";r.d(t,{A:()=>f});var n=r(14232),i=r(64148),o=r(81855),s=r(55295),a=r(27639),l=r(29804),c=r(16361),d=r(60109),u=r(91754),h=r(72328);let f=(e=!1)=>{let{contextMenu:t}=(0,i.b)(),{minimize:r,open:f}=(0,o.N)(),{aiEnabled:p,setAiEnabled:m,stackOrder:w}=(0,s.w)(),g=(0,l.w)(),{fullscreenElement:b,toggleFullscreen:v}=(0,a.T)(),x=(0,u._)(),y=(0,h.i)();return(0,n.useMemo)(()=>t?.(()=>{let t=Object.entries(g.current),n=t.length>0&&!t.some(([,{minimized:e}])=>!e),i=[{action:()=>(0,d.UH)(g.current,w,r),label:e?"Desktop":n?"Show open windows":"Show the desktop"}];return e?i.unshift({action:()=>f("Terminal"),label:"Terminal"},c.kG,{action:()=>f("FileExplorer"),label:"File Explorer"},{action:()=>f("Run"),label:"Run"},c.kG):i.unshift({action:()=>v(),label:b===document.documentElement?"Exit full screen":"Enter full screen"},c.kG,...x&&!y?[{action:()=>m(!p),checked:p,label:`Show ${c.K1} button`},c.kG]:[]),i}),[p,t,b,x,y,r,e,f,g,m,w,v])}},96856:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(14232);let i=(e,t)=>{let r=(0,n.useRef)(void 0);return(0,n.useEffect)(()=>(e&&!r.current&&(r.current=e(),t&&r.current.addEventListener("message",t,{passive:!0}),r.current.postMessage("init")),()=>{r.current?.terminate(),r.current=void 0}),[t,e]),r}}},e=>{e.O(0,[514,636,6593,8792],()=>e(e.s=16760)),_N_E=e.O()}]);